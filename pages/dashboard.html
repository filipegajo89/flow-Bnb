<!-- Estrutura HTML atualizada para dashboard.html -->

<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-eval' https://www.gstatic.com/firebasejs/ https://cdnjs.cloudflare.com/ https://cdn.jsdelivr.net/; style-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com/; font-src 'self' https://cdnjs.cloudflare.com/ data:; img-src 'self' https://via.placeholder.com/ https://i.imgur.com/ data: assets/images/ assets/icons/; connect-src 'self' https://*.firebaseio.com wss://*.firebaseio.com https://*.firebasedatabase.app https://firestore.googleapis.com https://*.googleapis.com;">
    <link rel="icon" href="../assets/icons/favicon.png" type="image/png">
    <title>FlowBnb - Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../style.css">
</head>
<body class="bg-gray-100 font-sans">
    <!-- Botão de Menu Mobile -->
    <button class="menu-toggle hidden md:hidden fixed top-4 left-4 z-20 bg-primary-color text-white p-2 rounded-md">
        <i class="fas fa-bars"></i>
    </button>

    <!-- Sidebar -->
    <div class="sidebar">
        <div class="logo-container">
            <img src="../assets/images/logo.png" alt="FlowBnb Logo" class="logo-image">
            <div>
                <span class="logo-text">FlowBnb</span>
                <span class="brand-tagline">Gestão Financeira de Imóveis</span>
            </div>
        </div>
        
        <nav>
            <a href="dashboard.html" class="sidebar-nav-item active">
                <i class="fas fa-tachometer-alt sidebar-nav-icon"></i>
                <span class="sidebar-nav-text">Dashboard</span>
            </a>
            <a href="#" class="sidebar-nav-item">
                <i class="fas fa-home sidebar-nav-icon"></i>
                <span class="sidebar-nav-text">Imóveis</span>
            </a>
            <a href="#" class="sidebar-nav-item">
                <i class="fas fa-money-bill-wave sidebar-nav-icon"></i>
                <span class="sidebar-nav-text">Transações</span>
            </a>
            <a href="#" class="sidebar-nav-item">
                <i class="fas fa-chart-line sidebar-nav-icon"></i>
                <span class="sidebar-nav-text">Relatórios</span>
            </a>
            <a href="#" class="sidebar-nav-item">
                <i class="fas fa-cog sidebar-nav-icon"></i>
                <span class="sidebar-nav-text">Configurações</span>
            </a>
        </nav>
        
        <div class="sidebar-footer">
            <a href="#" id="logoutBtn" class="logout-button">
                <i class="fas fa-sign-out-alt logout-icon"></i>
                <span>Sair</span>
            </a>
        </div>
    </div>
    
    <!-- Conteúdo Principal -->
    <div class="main-content">
        <!-- Header -->
        <header class="main-header">
            <h1 class="page-title">Dashboard</h1>
            <div class="flex items-center">
                <button class="btn btn-primary mr-4">
                    <i class="fas fa-plus btn-icon"></i>
                    <span>Novo Imóvel</span>
                </button>
                <div class="user-profile flex items-center">
                    <span class="mr-3 font-medium text-gray-700" id="userName">Usuário</span>
                    <div class="w-9 h-9 rounded-full bg-blue-100 flex items-center justify-center text-blue-500">
                        <i class="fas fa-user"></i>
                    </div>
                </div>
            </div>
        </header>
        
        <!-- Resumo Financeiro -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
            <div class="dashboard-card">
                <div class="card-header">
                    <div class="card-icon revenue">
                        <i class="fas fa-money-bill-wave text-xl"></i>
                    </div>
                    <div>
                        <h3 class="card-title">Receita Total</h3>
                        <p class="card-value" id="totalRevenue">R$ 0,00</p>
                    </div>
                </div>
            </div>
            
            <div class="dashboard-card">
                <div class="card-header">
                    <div class="card-icon expense">
                        <i class="fas fa-hand-holding-usd text-xl"></i>
                    </div>
                    <div>
                        <h3 class="card-title">Despesa Total</h3>
                        <p class="card-value" id="totalExpenses">R$ 0,00</p>
                    </div>
                </div>
            </div>
            
            <div class="dashboard-card">
                <div class="card-header">
                    <div class="card-icon profit">
                        <i class="fas fa-chart-line text-xl"></i>
                    </div>
                    <div>
                        <h3 class="card-title">Lucro Líquido</h3>
                        <p class="card-value" id="totalProfit">R$ 0,00</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Lista de Imóveis -->
        <div class="dashboard-card mb-6">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-lg font-semibold text-gray-800">Seus Imóveis</h2>
                <select id="monthFilter" class="border rounded px-3 py-1 text-sm bg-white">
                    <option value="all">Todos os meses</option>
                    <!-- Opções de meses -->
                </select>
            </div>
            
            <div id="propertiesList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <!-- Os cards de imóveis serão inseridos aqui via JavaScript -->
            </div>
        </div>
        
        <!-- Histórico de Transações Recentes -->
        <div class="dashboard-card">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-lg font-semibold text-gray-800">Transações Recentes</h2>
            </div>
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Data</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Imóvel</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Descrição</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Categoria</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Valor</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ações</th>
                        </tr>
                    </thead>
                    <tbody id="recentTransactions" class="bg-white divide-y divide-gray-200">
                        <!-- As transações serão inseridas aqui via JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    
    <!-- Modais (Incluir os modais como antes) -->
    
    <!-- Scripts do Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    
    <!-- Scripts da aplicação -->
    <script src="../js/firebase-config.js"></script>
    <script src="../js/auth.js"></script>
    <script src="../js/properties.js"></script>
    <script src="../js/transactions.js"></script>
    <script src="../js/dashboard.js"></script>
    
    <!-- Script para o menu mobile -->
    <script>
        // Adicionar evento para o botão de menu mobile
        document.addEventListener('DOMContentLoaded', function() {
            const menuToggle = document.querySelector('.menu-toggle');
            const sidebar = document.querySelector('.sidebar');
            
            if (menuToggle) {
                menuToggle.addEventListener('click', function() {
                    sidebar.classList.toggle('open');
                });
            }
        });
    </script>
</body>
</html>
